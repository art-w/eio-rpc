(library
 (name keyval_rpc_proto)
 (public_name eio-rpc-example.keyval-rpc-proto)
 (flags :standard -w +a-4-40-41-42-44-45-48-66 -warn-error +a)
 (libraries pbrt pbrt_services))

(rule
 (targets keyval.ml keyval.mli)
 (deps
  (glob_files *.proto))
 (action
  (run ocaml-protoc keyval.proto --binary --services --ml_out .)))
